"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2850],{Mb1N:(e,t,r)=>{r.d(t,{H:()=>i,L:()=>c});var n=r("zThL"),a=r("77l8"),s=r("AkOy"),o=r("zqKt"),u=r("iFif"),c={VALIDATE_USER_ALLOWED_Z_LOGIN:"validate_user_allowed_zomato_login",VALIDATE_USER_GUEST_LOGIN:"validate_user_guest_login",VALIDATE_USER_LOGGED_OUT_FLOW:"validate_user_logged_out",LOGIN_USER_RESPONSE:"login_user_success_response",LOGIN_PROMPT_IMPRESSION:"login_prompt_impression",LOGIN_PROMPT_BUTTON_CLICK:"login_prompt_button_click"},i=function(e){var t=e.ename,r=e.appType,i=e.validateUserRes,p=void 0===i?null:i,l=e.loginUserRes,d=void 0===l?null:l,f=o.Z.getInstance(),T=(0,a.Z)((0,a.Z)((0,a.Z)((0,n.Z)({},u.RL.ENAME,t),!(0,s.default)(p)&&(0,n.Z)({},u.RL.VAR4,JSON.stringify({validateUser:p}))),!(0,s.default)(d)&&(0,n.Z)({},u.RL.VAR5,JSON.stringify({loginUser:d}))),{},(0,n.Z)({},u.RL.VAR6,JSON.stringify({appType:r})));switch(t){case c.VALIDATE_USER_ALLOWED_Z_LOGIN:case c.VALIDATE_USER_GUEST_LOGIN:case c.VALIDATE_USER_LOGGED_OUT_FLOW:case c.LOGIN_USER_RESPONSE:case c.LOGIN_PROMPT_IMPRESSION:case c.LOGIN_PROMPT_BUTTON_CLICK:break;default:T=null}f.sendToJumbo(u.dZ.JEVENT,T)}},Ek7T:(e,t,r)=>{r.d(t,{Gb:()=>j,P6:()=>X,h:()=>F,ip:()=>G,pH:()=>K});var n=r("/0+J"),a=r("77l8"),s=r("Kq5O"),o=r.n(s),u=r("IihT"),c=r("AkOy"),i=r("lXQd"),p=r("yjvN"),l=r("aMMj"),d=r("KFCZ"),f=r("FS8r"),T=r("sLkX"),m=r("AdJq"),g=r("XFDC"),k=r("Ujvf"),_=r("T5pW"),v=r("Acma"),x=r("nQUI"),E=r("X2+A"),I=r("VAjR"),O=r("HKiI"),b=r("syeM"),P=r("Mb1N"),w=r("BFm+"),L=r("SEQN"),A=r("YAfz"),S=o().mark(G),h=o().mark(M),N=o().mark(H),R=o().mark(V),y=o().mark(F),U=o().mark(j),D=o().mark(X),Z=o().mark(W),C="Oops! Something went wrong";function G(e){var t,r,n,a,s,c,i,l,d,f,T,m,g,k,_,v,x,E,I,O,L,h,N,R,y,U,D,Z,C,G;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.successCallback,r=e.errorCallback,n=e.flowType,a=e.skipPrompt,s=void 0!==a&&a,c=e.initPrompt,i=void 0!==c&&c,l=e.modalPrompt,d=void 0===l||l,f=e.calculateCartData,T=void 0===f?{}:f,m=e.identityToken,g=void 0===m?"":m,k=e.phoneToken,_=void 0===k?"":k,v=!1,o.next=4,(0,u.Ys)((function(e){return(0,w.Z)(e)}));case 4:return x=o.sent,o.next=7,(0,u.Ys)((function(e){return(0,A.Z)(e)}));case 7:if(o.sent){o.next=48;break}return o.prev=9,o.delegateYield(V(s,n,g,_,r),"t0",11);case 11:if(E=o.t0,O=(I=E||{}).allowLogin,L=void 0!==O&&O,h=I.guestUser,N=void 0===h?{}:h,R=I.promptSnippet,y=void 0===R?{}:R,D=(U=N||{}).thirdPartyUserId,Z=U.guestId,E){o.next=16;break}throw Error(b.rI.VALIDATE_USER_FAILED);case 16:if(L||Z){o.next=18;break}throw Error(b.rI.NO_LOGIN_AND_GUESTID);case 18:if(!y){o.next=21;break}return o.delegateYield(z({loginOptionPromptSnippet:y,successCallback:t,skipPrompt:s,modalPrompt:d,flowType:n,calculateCartData:T,errorCallback:r,initPrompt:i}),"t1",20);case 20:return o.abrupt("return",!1);case 21:if(!D){o.next=29;break}return(0,P.H)({ename:P.L.VALIDATE_USER_GUEST_LOGIN,validateUserRes:E,appType:x}),o.next=25,(0,u.gz)((0,p.pY)(N));case 25:return o.next=27,re();case 27:o.next=40;break;case 29:if(!L){o.next=39;break}return(0,P.H)({ename:P.L.VALIDATE_USER_ALLOWED_Z_LOGIN,validateUserRes:E,appType:x}),o.delegateYield(K({skipPrompt:s,modalPrompt:d,successCallback:t,appType:x,flowType:n,identityTokenParam:g,phoneTokenParam:_,errorCallback:r}),"t2",32);case 32:if(C=o.t2){o.next=35;break}throw Error(b.rI.LOGIN_V2_FAILED);case 35:G=(C||{}).showPrompt,v=void 0!==G&&G&&d,o.next=40;break;case 39:Z&&((0,P.H)({ename:P.L.VALIDATE_USER_LOGGED_OUT_FLOW,validateUserRes:E,appType:x}),te(Z));case 40:return o.delegateYield(M(!v&&t),"t3",41);case 41:return o.abrupt("return",!0);case 44:return o.prev=44,o.t4=o.catch(9),o.delegateYield(H(r,i,n,o.t4),"t5",47);case 47:return o.abrupt("return",!1);case 48:return o.delegateYield(M(!v&&t),"t6",49);case 49:return o.abrupt("return",!0);case 50:case"end":return o.stop()}}),S,null,[[9,44]])}function Y(e){var t=e.showLoginPrompt,r=e.promptSnippet,n=e.successCallback;return o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return a={isVisible:!0,title:(0,i.default)(r,"title.text",""),subtitle:(0,i.default)(r,"subtitle.text",""),imageSrc:(0,i.default)(r,"image.url",""),onPrimaryClickHandler:n,primaryButtonLabel:(0,i.default)(r,"actionButtons[0].text",""),showPrimaryButton:!0},e.next=4,(0,u.gz)((0,E.C2)());case 4:return e.next=6,(0,u.gz)((0,_.jg)(a));case 6:case"end":return e.stop()}}),e)}))()}function z(e){var t=e.loginOptionPromptSnippet,r=e.successCallback,n=e.skipPrompt,s=e.modalPrompt,c=e.flowType,i=e.calculateCartData,p=e.errorCallback,l=e.initPrompt;return o().mark((function e(){var d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=(0,a.Z)((0,a.Z)({isVisible:!0},t),{},{onClickHandler:r,skipPrompt:n,modalPrompt:s,flowType:c,calculateCartData:i,errorCallback:p,initPrompt:l}),e.next=3,(0,u.gz)((0,E.C2)());case 3:return e.next=5,(0,u.gz)((0,L.Up)(d));case 5:case"end":return e.stop()}}),e)}))()}function M(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.gz)((0,p.GB)());case 2:if("function"!=typeof e){t.next=5;break}return t.next=5,e();case 5:case"end":return t.stop()}}),h)}function H(e,t,r,n){var a;return o().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!t){s.next=3;break}return s.next=3,(0,u.gz)((0,O.D4)({page_info:{name:I.fP,isMobile:1}}));case 3:return s.next=5,(0,u.Ys)((function(e){return(0,i.default)(e,"pages.current.name","")}));case 5:return a=s.sent,s.next=8,(0,u.gz)((0,p.Ag)());case 8:if((0,v.j5)(v.yt.USER_PERMISSION_FAILURE,{message:n.message,pageName:a,flowType:r,appType:v.IF.GPAY}),"function"!=typeof e){s.next=12;break}return s.next=12,e(n.message);case 12:case"end":return s.stop()}}),N)}function K(e){var t=e.skipPrompt,r=e.userId,n=void 0===r?0:r,a=e.modalPrompt,s=e.successCallback,c=e.appType,i=e.flowType,l=e.identityTokenParam,d=e.phoneTokenParam,f=e.errorCallback;return o().mark((function e(){var r,T,m,g,k,_,v,E,I,O,b,w,L,A,S,h,N;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,k=void 0===(g=(T={}).phoneToken)?d:g,_=T.success,v=T.errorMessage,(void 0===(m=T.identityToken)?l:m)&&k){e.next=9;break}return e.delegateYield(F({skipPrompt:t,flowType:i}),"t0",4);case 4:E=e.t0,E.identityToken,k=E.phoneToken,_=E.success,v=E.errorMessage;case 9:if(t||_){e.next=14;break}return f(v),e.next=13,(0,u.gz)((0,p.ph)());case 13:return e.abrupt("return",null);case 14:return e.prev=14,e.next=17,$(n);case 17:return I=e.sent,e.next=20,I.json();case 20:r=e.sent,e.next=26;break;case 23:e.prev=23,e.t1=e.catch(14),r=null;case 26:if(b=(O=r||{}).zomatoUser,w=void 0===b?null:b,L=O.showPrompt,A=void 0!==L&&L,S=O.promptSnippet,h=void 0===S?null:S,r||w){e.next=31;break}return e.next=30,(0,u.gz)((0,p.ph)());case 30:return e.abrupt("return",null);case 31:return e.next=33,(0,u.gz)((0,x.lx)(w));case 33:return(0,P.H)({ename:P.L.LOGIN_USER_RESPONSE,loginUserRes:r,appType:c}),N=A&&a,e.delegateYield(Y({showLoginPrompt:N,promptSnippet:h,successCallback:s}),"t2",36);case 36:return e.next=38,re();case 38:return e.next=40,(0,u.gz)((0,p.WL)());case 40:return e.abrupt("return",r);case 41:case"end":return e.stop()}}),e,null,[[14,23]])}))()}function V(e,t,r,n,a){var s,u,c,p,l,d,f,T,m,g,k;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=null,d=void 0===(l=(u={}).phoneToken)?n:l,f=u.success,T=u.errorMessage,(p=void 0===(c=u.identityToken)?r:c)&&d){o.next=9;break}return o.delegateYield(F({skipPrompt:e,flowType:t}),"t0",4);case 4:m=o.t0,p=m.identityToken,d=m.phoneToken,f=m.success,T=m.errorMessage;case 9:if(e||f){o.next=12;break}return a(T),o.abrupt("return",s);case 12:return o.prev=12,o.next=15,Q(p,d);case 15:return g=o.sent,o.next=18,g.json();case 18:return s=o.sent,k=(0,i.default)(s,"guestUser.guestId",""),o.delegateYield(W(k,p,d),"t1",21);case 21:o.next=32;break;case 23:if(o.prev=23,o.t2=o.catch(12),!o.t2.response){o.next=31;break}return o.next=29,o.t2.response.json();case 29:o.sent;case 31:s=null;case 32:return o.abrupt("return",s);case 33:case"end":return o.stop()}}),R,null,[[12,23]])}function F(e){var t,r,n,a,s,c,l,d,f,T,m,g;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t={},r={},n="",a=e.skipPrompt,s=e.flowType,o.next=6,(0,u.Ys)((function(e){return(0,i.default)(e,"pages.current.name","")}));case 6:return c=o.sent,l=!0,o.prev=8,o.next=11,(0,u.RE)(B,a);case 11:t=o.sent,o.next=22;break;case 14:if(o.prev=14,o.t0=o.catch(8),l=!1,n=o.t0.message,a){o.next=21;break}return o.next=21,(0,u.gz)((0,k.u1)(o.t0.message));case 21:(0,v.j5)(v.yt.USER_IDENTITY_FAILURE,{message:o.t0.message,pageName:c,flowType:s,appType:v.IF.GPAY});case 22:if(!l){o.next=36;break}return o.prev=23,o.next=26,(0,u.RE)(J,a);case 26:r=o.sent,o.next=36;break;case 29:if(o.prev=29,o.t1=o.catch(23),n=o.t1.message,a){o.next=35;break}return o.next=35,(0,u.gz)((0,k.u1)(o.t1.message));case 35:(0,v.j5)(v.yt.USER_PERMISSION_FAILURE,{message:o.t1.message,pageName:c,flowType:s,appType:v.IF.GPAY});case 36:if(d=t.grantToken,f=void 0===d?"":d,T=r.grantToken,m=void 0===T?"":T,"",g=!0,!f||!m){o.next=46;break}return o.delegateYield(W("",f,m),"t2",42);case 42:return o.next=44,(0,u.gz)((0,p.P7)({identityToken:f,phoneToken:m}));case 44:o.next=49;break;case 46:return g=!1,o.next=49,(0,u.gz)((0,p.pX)());case 49:return o.abrupt("return",{identityToken:f,phoneToken:m,success:g,errorMessage:n});case 50:case"end":return o.stop()}}),y,null,[[8,14],[23,29]])}function j(){var e,t;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.K.getItem("guestId");case 2:if(e=r.sent){r.next=5;break}return r.abrupt("return");case 5:return r.next=7,(0,u.gz)((0,p.B8)());case 7:return t={guest_id:e},r.next=10,(0,u.gz)((0,p.pY)(t));case 10:case"end":return r.stop()}}),U)}function X(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.RE)(q,{});case 2:if(!(e=t.sent)){t.next=8;break}return t.next=6,(0,u.gz)((0,l.s3)(e,void 0,1));case 6:t.next=10;break;case 8:return t.next=10,(0,u.gz)((0,p.O1)());case 10:case"end":return t.stop()}}),D)}var B=function(e){var t=d.Z.getClient();if(t)return t.requestIdentity(e);throw Error(C)},J=function(e){var t=d.Z.getClient();if(t)return t.requestUserDetails(e);throw Error(C)};function W(e,t,r){var n,s;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if({},n=(0,a.Z)((0,a.Z)((0,a.Z)({},e&&{"X-ACCESS-UUID":e}),t&&{"X-ZOMATO-THIRDPARTY-IDENTITY-TOKEN":t}),r&&{"X-ZOMATO-THIRDPARTY-PHONE-TOKEN":r}),(0,c.default)(n)){o.next=7;break}return s={headers:n},(0,T.Io)({config:s}),o.next=7,(0,u.gz)((0,g.G)(s));case 7:case"end":return o.stop()}}),Z)}var q=function(){var e=(0,n.Z)(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,ee();case 4:return r=e.sent,e.next=7,r.json();case 7:t=e.sent,e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0.response){e.next=17;break}return e.next=15,e.t0.response.json();case 15:e.sent;case 17:return e.abrupt("return",t.url);case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Q=function(e,t){var r={method:"POST",headers:(0,a.Z)((0,a.Z)({},e&&{"X-ZOMATO-THIRDPARTY-IDENTITY-TOKEN":e}),t&&{"X-ZOMATO-THIRDPARTY-PHONE-TOKEN":t})};return(0,T.ZP)(m.ny,r)},$=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r={userId:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},n={method:"POST",headers:(0,a.Z)((0,a.Z)({},e&&{"X-ZOMATO-THIRDPARTY-IDENTITY-TOKEN":e}),t&&{"X-ZOMATO-THIRDPARTY-PHONE-TOKEN":t}),body:(0,T.je)(r)};return(0,T.ZP)(m.lW,n)},ee=function(){return(0,T.ZP)(m.Eo,{method:"GET"})},te=function(e){f.K.setItem("guestId",e)},re=function(){f.K.removeItem("guestId")}},"3bOz":(e,t,r)=>{r.d(t,{Z:()=>u});var n=r("79Ja"),a=r("k6Di"),s=r("zThL"),o="@PartnershipMweb:",u=(0,n.Z)((function e(){(0,a.Z)(this,e)}));(0,s.Z)(u,"setItem",(function(e,t){return new Promise((function(r){window.localStorage?r(window.localStorage.setItem(o+e,JSON.stringify(t))):r(null)}))})),(0,s.Z)(u,"getItem",(function(e){return new Promise((function(t){window.localStorage?t(JSON.parse(window.localStorage.getItem(o+e))):t(null)}))})),(0,s.Z)(u,"removeItem",(function(e){return new Promise((function(t){window.localStorage?t(window.localStorage.removeItem(o+e)):t(null)}))}))},FS8r:(e,t,r)=>{r.d(t,{K:()=>n.Z});var n=r("3bOz")},YAfz:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r("lXQd");const a=function(e){var t=Number((0,n.default)(e,"user.basic_info.id",0));return Number.isNaN(t)?0:t}}}]);